{"version":3,"sources":["src/index.js"],"names":["raw","require","start","images","canvas","document","getElementById","parentElement","removeChild","undefined","duration","im","width","step","animate","t","k","Math","floor","length","index","src","requestAnimationFrame","pixelify","img","ctx","getContext","w","h","height","clearRect","drawImage","toDataURL","loadImage","Promise","resolve","reject","Image","onload","onerror","loaders","i","push","then","all"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["const raw = [\n  require('../static/logo-1.svg'),\n  require('../static/logo-2.svg'),\n  require('../static/logo-3.svg')];\n\nfunction start(images) {\n  // Drop canvas\n  var canvas = document.getElementById('work');\n  canvas.parentElement.removeChild(canvas);\n  canvas = undefined;\n\n  var duration = 30;\n  var im = document.getElementById('target');\n  im.width = 640;\n  \n  var step = [null, 0, 0, 0, 0, 0, 1, 1, 1];\n  function animate(t) {\n    // 001 223 445\n    var k = Math.floor(t % (step.length*duration * images.length / 2) / duration);\n    var index = 2*Math.floor(k/step.length) + step[k % step.length];\n    if (index) {\n      im.src = images[index];\n    } else {\n      im.src = undefined;\n    }\n    requestAnimationFrame(animate);\n  }\n  requestAnimationFrame(animate);\n}\n\nfunction pixelify(img) {\n  var canvas = document.getElementById('work');\n  var ctx = canvas.getContext('2d');\n\n  var w = 64;\n  var h = w * img.height / img.width;\n  canvas.width = w;\n  canvas.height = h;\n  ctx.clearRect(0, 0, w, h);\n  ctx.drawImage(img, 0, 0, w, h);\n  return canvas.toDataURL();\n}\n\nfunction loadImage(src) {\n  return new Promise(function(resolve, reject) {\n    var img = new Image();\n    img.onload = function() { resolve(img); };\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n\n//var crisp = [];\n//var pixelized = [];\nvar images = [];\n\nvar loaders = [];\nfor (var i = 0; i < raw.length; i++) {\n  //crisp.push(i);\n  images[2*i] = raw[i];\n  loaders.push(\n    loadImage(raw[i]).then(pixelify).then((function(index) {\n      return function(img) {\n        images[2*index+1] = img;\n      };\n    })(i))\n  );\n}\nPromise.all(loaders).then(function() { start(images); });\n"]}