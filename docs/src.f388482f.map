{"version":3,"sources":["src/index.js"],"names":["raw","require","start","images","canvas","document","getElementById","parentElement","removeChild","undefined","duration","im","width","step","requestAnimationFrame","animate","t","k","Math","floor","length","index","src","pixelify","img","ctx","getContext","h","height","clearRect","drawImage","toDataURL","loadImage","Promise","resolve","reject","Image","onload","onerror","loaders","i","push","then","all"],"mappings":";;;;;;;AAAA,IAAMA,EAAM,CACVC,QAAQ,wBACRA,QAAQ,wBACRA,QAAQ,yBAEV,SAASC,EAAMC,GAETC,IAAAA,EAASC,SAASC,eAAe,QACrCF,EAAOG,cAAcC,YAAYJ,GACjCA,OAASK,EAELC,IAAAA,EAAW,GACXC,EAAKN,SAASC,eAAe,UACjCK,EAAGC,MAAQ,IAEPC,IAAAA,EAAO,CAAC,KAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAYvCC,sBAXSC,SAAAA,EAAQC,GAEXC,IAAAA,EAAIC,KAAKC,MAAMH,GAAKH,EAAKO,OAAOV,EAAWP,EAAOiB,OAAS,GAAKV,GAChEW,EAAQ,EAAEH,KAAKC,MAAMF,EAAEJ,EAAKO,QAAUP,EAAKI,EAAIJ,EAAKO,QAEtDT,EAAGW,IADDD,EACOlB,EAAOkB,QAEPZ,EAEXK,sBAAsBC,KAK1B,SAASQ,EAASC,GACZpB,IAAAA,EAASC,SAASC,eAAe,QACjCmB,EAAMrB,EAAOsB,WAAW,MAGxBC,EADI,GACIH,EAAII,OAASJ,EAAIZ,MAKtBR,OAJPA,EAAOQ,MAFC,GAGRR,EAAOwB,OAASD,EAChBF,EAAII,UAAU,EAAG,EAJT,GAIeF,GACvBF,EAAIK,UAAUN,EAAK,EAAG,EALd,GAKoBG,GACrBvB,EAAO2B,YAGhB,SAASC,EAAUV,GACV,OAAA,IAAIW,QAAQ,SAASC,EAASC,GAC/BX,IAAAA,EAAM,IAAIY,MACdZ,EAAIa,OAAS,WAAaH,EAAQV,IAClCA,EAAIc,QAAUH,EACdX,EAAIF,IAAMA,IASd,IAHA,IAAInB,EAAS,GAEToC,EAAU,GACLC,EAAI,EAAGA,EAAIxC,EAAIoB,OAAQoB,IAE9BrC,EAAO,EAAEqC,GAAKxC,EAAIwC,GAClBD,EAAQE,KACNT,EAAUhC,EAAIwC,IAAIE,KAAKnB,GAAUmB,KAAM,SAASrB,GACvC,OAAA,SAASG,GACdrB,EAAO,EAAEkB,EAAM,GAAKG,GAFe,CAIpCgB,KAGPP,QAAQU,IAAIJ,GAASG,KAAK,WAAaxC,EAAMC","file":"src.f388482f.map","sourceRoot":"..","sourcesContent":["const raw = [\n  require('../static/logo-1.svg'),\n  require('../static/logo-2.svg'),\n  require('../static/logo-3.svg')];\n\nfunction start(images) {\n  // Drop canvas\n  var canvas = document.getElementById('work');\n  canvas.parentElement.removeChild(canvas);\n  canvas = undefined;\n\n  var duration = 30;\n  var im = document.getElementById('target');\n  im.width = 640;\n  \n  var step = [null, 0, 0, 0, 0, 0, 1, 1, 1];\n  function animate(t) {\n    // 001 223 445\n    var k = Math.floor(t % (step.length*duration * images.length / 2) / duration);\n    var index = 2*Math.floor(k/step.length) + step[k % step.length];\n    if (index) {\n      im.src = images[index];\n    } else {\n      im.src = undefined;\n    }\n    requestAnimationFrame(animate);\n  }\n  requestAnimationFrame(animate);\n}\n\nfunction pixelify(img) {\n  var canvas = document.getElementById('work');\n  var ctx = canvas.getContext('2d');\n\n  var w = 64;\n  var h = w * img.height / img.width;\n  canvas.width = w;\n  canvas.height = h;\n  ctx.clearRect(0, 0, w, h);\n  ctx.drawImage(img, 0, 0, w, h);\n  return canvas.toDataURL();\n}\n\nfunction loadImage(src) {\n  return new Promise(function(resolve, reject) {\n    var img = new Image();\n    img.onload = function() { resolve(img); };\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n\n//var crisp = [];\n//var pixelized = [];\nvar images = [];\n\nvar loaders = [];\nfor (var i = 0; i < raw.length; i++) {\n  //crisp.push(i);\n  images[2*i] = raw[i];\n  loaders.push(\n    loadImage(raw[i]).then(pixelify).then((function(index) {\n      return function(img) {\n        images[2*index+1] = img;\n      };\n    })(i))\n  );\n}\nPromise.all(loaders).then(function() { start(images); });\n"]}